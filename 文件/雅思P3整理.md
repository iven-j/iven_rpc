## 购物袋逻辑梳理

？平时在项目里是怎么降级的



这一块就把取缓存的逻辑以及架构图说一遍



![img](https://apijoyspace.jd.com/v1/files/TdpsvRBvssn0qxUYEjOv/link)







## 通过ducc更新本地缓存

直播频道多个地方（比如猜你喜欢列表，推荐列表）都依赖算法接口，当上游接口的可用率不是100%的情况下，我们会通过其他应用定时任务每30s执行，查询数据库里符合条件的直播id列表，然后往jimdb里写入数据。然后通知ducc更新key，value是当前最新时间。再通过监听ducc资源所有变更，每次ducc更新，就读取jimdb缓存，把直播id列表更新到本地缓存常量里。这样上游推荐算法接口有异常的时候，我们就可以通过读取本地缓存直播间列表进行兜底。这样做的好处，可以防止热key，并且减少主流程对jimdb的依赖性和调用量。



## 价格保障逻辑梳理





1.RPC搞完

2.刷完题目

3。购物袋逻辑能完整叙述

4.JMQ也要看



